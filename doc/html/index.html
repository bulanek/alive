<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Alive: Alive Documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Alive
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Alive Documentation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="section author"><dt>Author</dt><dd>Boris Bulanek  National Radiation Protection Institute, Bartoskova 28, 140 00, Praha 4  <a href="#" onclick="location.href='mai'+'lto:'+'bor'+'is'+'.bu'+'la'+'nek'+'@s'+'uro'+'.c'+'z'; return false;">boris<span style="display: none;">.nosp@m.</span>.bul<span style="display: none;">.nosp@m.</span>anek@<span style="display: none;">.nosp@m.</span>suro<span style="display: none;">.nosp@m.</span>.cz</a>  00420 226 518 279 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>02/19/13</dd></dl>
<h1><a class="anchor" id="about"></a>
About the program</h1>
<p>Program Alive (<b>A</b>nalyst <b>li</b>ght <b>ve</b>rsion) is created in order to provide simple and fast OSL dose estimation. Program allow user to calculate a dose using at least one calibration and one natural signal. Signal is corrected on fading. Definition of a signal value is tested by <a class="el" href="index.html#plateau_test">Plateau test</a>.</p>
<p>A binary file from the Sequence reader of <a href="http://www.nutech.dtu.dk/Produkter/Dosimetri/NUK_instruments/TL_OSL_readers.aspx?sc_lang=en">Risø software</a> can be used as an input. Program allow user to obtain and store data using <a href="http://www.sqlite.org">Sqlite</a> database. User can dump all data to txt file as well.</p>
<p>The program uses some additional packages:</p>
<ul>
<li>UI (User Interface) framework <a href="http://qt-project.org/">Qt</a></li>
<li>a package for minimization <a href="http://www.gnu.org/software/gsl/">GSL</a></li>
<li>collection of <code>C++</code> tools <a href="http://www.boost.org/">Boost</a></li>
<li>database software called <a href="http://www.sqlite.org">Sqlite</a></li>
</ul>
<h1><a class="anchor" id="Installation"></a>
Installation</h1>
<p>A single executable file <b>alive.exe</b> is created for Windows (7 or XP) users using <a href="http://pic.dhe.ibm.com/infocenter/aix/v7r1/index.jsp?topic=%2Fcom.ibm.aix.prftungd%2Fdoc%2Fprftungd%2Fwhen_dyn_linking_static_linking.htm">static linking</a>. Linux users can execute <code>alive.exe</code> using program <a href="http://www.winehq.org/">wine</a>. I haven't tried to install the program on Mac but I believe that the installation is similar to installation on Linux. </p>
<h2><a class="anchor" id="Linux"></a>
Linux</h2>
<p>All of needed packages have to be in official repositories of your distribution as all of them are open source programs. For example in case of <a href="https://www.archlinux.org/">Arch Linux</a> distribution, you have only to write down command like:<br/>
 <code>sudo pacman -S cmake boost boost-build boost-libs gsl qt sqlite3 sqliteman</code>.<br/>
 After installation you have to go to the src directory and e.g. follow these steps:<br/>
 <code> mkdir build<br/>
 cd build<br/>
 qmake-qt4 ..<br/>
 make<br/>
 ./alive<br/>
 </code> This approach uses shared library linking where the size of the executable <code>alive</code> is considerably smaller and you can use all of additional packages mentioned in the beginning of the section.</p>
<h2><a class="anchor" id="sql_win"></a>
Sqlite database</h2>
<p>All the information from binary file and some additional parameters can be stored in a simple database called <a href="http://www.sqlite.org">Sqlite</a>. There exist graphical tool for working with a Sqlite database called <a href="http://www.sqliteman.com">Sqliteman</a>.</p>
<h1><a class="anchor" id="running_code"></a>
Program user guide</h1>
<h2><a class="anchor" id="algorithm"></a>
Algorithm</h2>
<p>The signal is defined as a sum of first <img class="formulaInl" alt="$N$" src="form_16.png"/> channels signal value minus signal of the next <img class="formulaInl" alt="$N$" src="form_16.png"/> channels due to background substraction. Error of signal in channels is given by Poisson distribution. In order to compute dose of the "Natural" signal, there is minimum one "Dose" signal with known irradiation time required. User can choose functions following calibration functions:</p>
<ul>
<li>linear <img class="formulaInl" alt="$a+bx$" src="form_0.png"/>; used by default; in case of one calibration point only <img class="formulaInl" alt="$a=0$" src="form_1.png"/></li>
<li>quadratic <img class="formulaInl" alt="$a+bx+cx^2$" src="form_2.png"/></li>
<li>cubic <img class="formulaInl" alt="$a+bx+cx^2+dx^3$" src="form_3.png"/></li>
<li>exponential <img class="formulaInl" alt="$a*\exp((x-b)/|c|)$" src="form_4.png"/></li>
<li>line+exponential <img class="formulaInl" alt="$a*\exp((x-b)/|c|)+d*x$" src="form_5.png"/></li>
</ul>
<p>Parameters <img class="formulaInl" alt="$a,\dots ,d$" src="form_28.png"/> are written in program as <img class="formulaInl" alt="$[0],\dots ,[3]$" src="form_29.png"/>.</p>
<p>The proper parameters of function are estimated using <img class="formulaInl" alt="$\chi^2$" src="form_6.png"/> minimization. The error of the dose is computed using assumption of linear behaviour of function at the point of the signal in error range: <img class="formulaInl" alt="$\delta(dose)=\delta(signal)/\frac{\partial f(x)}{\partial x}_{|f(x)=signal}$" src="form_11.png"/>.</p>
<p>The fading function value is defined as a value which you have to multiply by the hypothetical unfaded signal value in order to get the measured (faded) value. <br/>
 User can choose one of three possible fading functions for every measurement:</p>
<ul>
<li>constant <img class="formulaInl" alt="$a$" src="form_18.png"/> used default with <img class="formulaInl" alt="$a=1$" src="form_19.png"/> (no fading)</li>
<li>logarithmic <img class="formulaInl" alt="$a-b\ln(t)$" src="form_12.png"/></li>
<li>exponential <img class="formulaInl" alt="$a*t^{-b}$" src="form_13.png"/> , where <img class="formulaInl" alt="$t$" src="form_15.png"/> is the time between irradiation and measurement.<br/>
 Fading parameters <img class="formulaInl" alt="$a,b$" src="form_25.png"/> are written in the program as <img class="formulaInl" alt="$fad\_0,fad\_1$" src="form_27.png"/>. User can adjust as the fading parameters as the time-unit. Dose <img class="formulaInl" alt="$D$" src="form_20.png"/> is corrected by fading of signal itself and fading of the calibration signal using formula:<br/>
 <img class="formulaInl" alt="$D_{corrected}=\frac{F_{calibration}}{F_{natural}}\cdot D_{uncorrected}$" src="form_23.png"/>, where <img class="formulaInl" alt="$F$" src="form_22.png"/> is previously mentioned fading correction. Because of assumption of the same time between calibration irradiation and measurement of the signal for all the calibration points there is no separate correction of calibration signal. It can be easily changed in the future.</li>
</ul>
<h2><a class="anchor" id="running_program"></a>
Running program</h2>
<p>The program is executed by opening the binary file <code>alive.exe</code>. The program is reading a configuration file <code>alive.xml</code> where e.g. the default path to the database is written. It has to be in the same directory as an executable file. After executing alive executable and open file (database entry) through <code> File-&gt;Open File (Db) </code> you will see <br/>
 </p>
<div class="image">
<img src="mainwindow.png" alt="mainwindow.png"/>
</div>
<ol type="1">
<li>Graphs of all measurements in the binary file (database). <br/>
</li>
<li>The table of single measurements information. You can select, which variable to show by clicking on the button <code>Variables</code>. Then you will see the window with all the variables. They are divided in two groups. First group are the variables, which are stored in the origin binary file created by <code>Sequence Viewer</code>. The second group are variables created for this program. While clicking and staying with the mouse on the name, you can see the help information. This information is provided by the manual for <code>Analyst</code> by Risø. The same names of variables are used while saving information into <code>Sqlite</code> database.</li>
</ol>
<p>You can select a subset of measurements for analysis editing a line <code> Edit Measurement </code> in a main window. You can select as a single measurement as a range of measurements (e.g. 1,2-4). In order to adjust informations as irradiation and measurement time due to fading correction or irradiation time and type of data for calibration and subsequent dose estimation, you have to edit the needed variables by selecting proper measurement number and clicking on <code>Edit Measurement</code> button. </p>
<div class="image">
<img src="info.png" alt="info.png"/>
</div>
<p> After adjusting of all parameters, you can see the signal-dose graph with calibration fit by clicking on <code>Dose estimation</code> button. </p>
<div class="image">
<img src="dose.png" alt="dose.png"/>
</div>
<p> You can see the table with variables needed to estimate uncorrected signal from data(signal and background range), fading correction (fading function and parameters) and informations about data type and irradiation time. You can select time unit of time in a fading function, show uncorrected signal data by clicking on <code> Show signal data</code>, change calibration function, show parameters of calibration function (you have to click on replot in order to change the parameters) by clicking on <code> Fit result</code> button. By clicking on <code> Compute Dose</code> button and writting down the particular measurement, you will see the table of computed dose with(out) fading correction and fading correction itself. <br/>
</p>
<p>In order to save data for further processing you can save all the data to the txt file by clicking on <code> File-&gt;Save txt</code> in a main window. Until now there is not a possibility to read such a txt file for further processing. But you have a possibility to store and reuse of all data by using the <code> Sqlite </code> database. In order to save all the information to a database, you have first to create the database. You can save the database by clicking <code> File-&gt;Save db</code> in main window. </p>
<div class="image">
<img src="sql.png" alt="sql.png"/>
</div>
<p> You will see the window where you have to type the name of the database and in case of saving data the name of database entry. After typing the database name and clicking on the <code>Connect to database</code> button you will see the table of all already saved binary files. Right clicking on the particular line, you will see the possibility of deletion of <code>Sqlite</code> data from particular binary file with deletion of all subtables or looking deeper on measurements for particular saved binary file. After right clicking on the particular measurement, you can look on the measurement data. All the tables are editable and by editing them you are changing directly the information in the <code>Sqlite</code> database. More about organization of database tables is written in section <a class="el" href="index.html#db_tables">Database tables</a>.</p>
<h2><a class="anchor" id="plateau_test"></a>
Plateau test</h2>
<p>Clicking on the <code>"Show Plateau"</code> button in the main window, you can see the graph of the dependence of the calculated uncorrected dose on the range of a signal and background interval. The range value <code>VALUE</code> on the x-axis means that the signal for the dose calculation is evaluated as integral (0,<code>VALUE</code>) minus background integral (<code>VALUE+1</code>,2*<code>VALUE+1</code>). </p>
<div class="image">
<img src="plateau.png" alt="plateau.png"/>
</div>
<h2><a class="anchor" id="db_tables"></a>
Database tables</h2>
<p>All of the tables are generated automaticaly while saving the database. Tables in the <code>Sqlite</code> database are divided into three levels. First-level table called INFO_1 is a table of saved binary files. Every line is connected to informations of particular binary file. This table included only information like ID(identification number, automaticaly incrementaly generated from 1), number of measurements, time of saving data. Second-level of tables called INFO_2_&lt;ID&gt; are tables of information for particular file where ID is mentioned identification number. Every line is connected to information of one single measurement of original binary file. This tables include information like data type of measurement, luminiscence type, irradiation time etc. The third level of tables called INFO_3_&lt;ID&gt;_&lt;num_measurement&gt; are tables of data of particular measurement where num_measurement is a number of measurement of particular database entry from binary file with identification number ID.<br/>
</p>
<p>E.g. if i've saved two binary files into <code>Sqlite</code> database and want to see data of the fourth measurement of the second binary file, have a look into <code>INFO_1</code> table and look on the ID of the second measurement (have to be 2), and show the <code>INFO_3_2_4</code>. If you are using the <code>Sqlite</code> database window table of the program (<code>File-&gt;Open db</code> or <code>File-&gt;Save db</code>) you can show this table by clicking on the line with the correct ID in INFO_1 table and then on the line of the right measurement in the second-level table.</p>
<p>There is a possibility to dump all the information from run to the txt file.</p>
<h1><a class="anchor" id="devel"></a>
Developement of the program</h1>
<p>The code is developed using C++ programming language and files developed in <code>C++</code> are all file with .cc (source) and .h (header) sufix. Files with .ui sufix are created by using Qt designer tools for UI (User interface) developement. Compilation generate files with ui and moc prefixes (more <a href="http://qt-project.org/doc/qt-4.8/qmake-manual.html">here</a>).</p>
<p>The documentation of the code is created by <a href="http://www.stack.nl/~dimitri/doxygen/">doxygen</a>. This document page is created by it as well. Clicking on the <code> "Data Structures -&gt; Class Hierarchy" </code> at the top of this page you can see the objects (classes) of this program. Following is the brief description of all classes.</p>
<h2><a class="anchor" id="brief_dev"></a>
Program structure overview</h2>
<p>Obtain data from binary file is provided by <a class="el" href="classBinReader.html">BinReader</a> class. Storage of data for one single measurement is provided by <a class="el" href="classData.html">Data</a> class. Computing of needed observables asi the dose and fading correction is provided by <a class="el" href="classDataHandle.html">DataHandle</a> class. Reading and writting the <code>Sqlite</code> database is provided by <a class="el" href="classSqlHandle.html">SqlHandle</a> class.</p>
<p>Classes which provide the user interface are classes inherited by QMainWindow and QDialog. There are also .ui files with the same name providing the design of windows only.</p>
<ul>
<li><a class="el" href="classMainWindow.html">MainWindow</a> is the class of the window, which you can see after executing the program executable.</li>
<li><a class="el" href="classInfo.html">Info</a> is connected to the window, which you can see after clicking on Edit Measurement button in <a class="el" href="classMainWindow.html">MainWindow</a>.</li>
<li><a class="el" href="classCalibration.html">Calibration</a> is connected to the window, which you can see after clicking on Dose estimation button in <a class="el" href="classMainWindow.html">MainWindow</a></li>
<li><a class="el" href="classPlateau.html">Plateau</a> is connected to the windo, which you can see after clicking on <a class="el" href="classPlateau.html">Plateau</a> button in <a class="el" href="classMainWindow.html">MainWindow</a></li>
<li><a class="el" href="classSqlConnection.html">SqlConnection</a> is connected to the window, which you can see while opening or saving <code>Sqlite</code> database</li>
<li><a class="el" href="classDbSave.html">DbSave</a> is connected to the window with progress bar, which appeares while saving the database entry</li>
<li><a class="el" href="classMyThread.html">MyThread</a> is a class withou the .ui file which provide separate thread for saving the database entry</li>
</ul>
<p>In order to develope program you have to develope an user interface as well. For that purpose you can use <code>QtDesigner</code> or the developement tool <a href="http://qt.digia.com/Product/Developer-Tools/">QtCreator</a>.</p>
<p>The code itself has not been documented until now. Everybody is welcome to help with the code developement. The developement of the code and documentation can and be managed using <a href="http://git-scm.com/">git</a> version system and all the code with possible developement branches stored in <a href="https://github.com/bulanek/alive">https://github.com/bulanek/alive</a>. In order to commit your code and documentation changes to the web page which will be the storage of the newest code with all the history changes and possible branches you have to create (free) <a href="https://github.com/">GitHub</a> account and send me an email with your user name. I will then put yourself to the list of contributors.</p>
<p>If you have any question, please send me a mail to: <a href="#" onclick="location.href='mai'+'lto:'+'bor'+'is'+'.bu'+'la'+'nek'+'@s'+'uro'+'.c'+'z'; return false;">boris<span style="display: none;">.nosp@m.</span>.bul<span style="display: none;">.nosp@m.</span>anek@<span style="display: none;">.nosp@m.</span>suro<span style="display: none;">.nosp@m.</span>.cz</a> </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Apr 30 2013 15:22:24 for Alive by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
